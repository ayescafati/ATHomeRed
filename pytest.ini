[pytest]
# Configuración de pytest

testpaths = tests

python_files = test_*.py

python_functions = test_*

python_classes = Test*

markers =
    unit: Tests unitarios (sin BD, rápidos)
    integration: Tests de integración (con BD de test)
    postgres: Tests que requieren PostgreSQL
    supabase: Tests que requieren Supabase (PostgreSQL hosted)
    readonly: Tests de solo lectura (no modifican BD)
    domain: Tests del domain layer
    api: Tests de API layer
    slow: Tests lentos
    authflow: tests de autenticación (flujo general)
    auth_ok: casos positivos de autenticación mínima (register, login, me, refresh OK)
    auth_neg: casos negativos de auth (password inválida, bearer malformado, refresh inválido)

addopts = 
    -v
    --tb=short
    --strict-markers

filterwarnings =
    ignore:.*argon2\.__version__.*:DeprecationWarning:passlib\.handlers\.argon2

    ignore:.*datetime\.datetime\.utcnow\(\) is deprecated.*:DeprecationWarning:sqlalchemy\.sql\.schema

    ignore:.*datetime\.datetime\.utcnow\(\) is deprecated.*:DeprecationWarning:jose\.jwt
